<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Binance Radar</title>
    <style>
        :root {
            --bg-color: #0d0f14;
            --card-bg: #1a1d24;
            --text-main: #ffffff;
            --text-dim: #888888;
            --accent-green: #00ff88;
            --accent-red: #ff3355;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 400px;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
        }

        h1 { font-size: 1rem; color: var(--text-dim); margin-bottom: 20px; font-weight: 600; }
        
        .price-box { margin: 20px 0; }
        .price { font-size: 3.5rem; font-weight: 800; letter-spacing: -1px; }
        .price.up { color: var(--accent-green); }
        .price.down { color: var(--accent-red); }

        .indicators {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 12px;
        }
        .card label { display: block; color: var(--text-dim); font-size: 0.75rem; margin-bottom: 5px; }
        .card span { font-weight: bold; font-size: 1.1rem; }

        .alert-box {
            background: #252830;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid transparent;
        }
        .alert-box.waiting { border-color: #444; color: var(--text-dim); }
        .alert-box.long { border-color: var(--accent-green); color: var(--accent-green); }
        .alert-box.short { border-color: var(--accent-red); color: var(--accent-red); }

        .levels { margin-top: 15px; font-size: 0.8rem; color: var(--text-dim); }
        
        .status { margin-top: 10px; font-size: 0.7rem; color: #555; }
        .status.online { color: var(--accent-green); }
    </style>
</head>
<body>

    <div class="container">
        <h1>SOLUSDT ‚Ä¢ BINANCE FUTURES</h1>
        
        <div class="price-box">
            <div class="price" id="priceDisplay">0.00</div>
        </div>

        <div class="indicators">
            <div class="card">
                <label>SLOPE (1H)</label>
                <span id="slopeDisplay">--%</span>
            </div>
            <div class="card">
                <label>TEND√äNCIA EMA</label>
                <span id="trendDisplay">--</span>
            </div>
        </div>

        <div class="alert-box waiting" id="alertBox">
            <h2 id="alertText">‚è≥ Aguardando Dados</h2>
        </div>

        <div class="levels" id="levelsDisplay">SUP: -- | RES: --</div>
        
        <div class="status" id="statusDisplay">üî¥ Desconectado</div>
    </div>

    <script>
        const SYMBOL = 'solusdt';
        const WS_URL = `wss://fstream.binance.com/ws/${SYMBOL}@kline_1h`;
        const SLOPE_THRESHOLD = 0.08;
        
        let priceHistory = [];
        let trend = 'NEUTRO';
        let lastAlert = '';

        const elPrice = document.getElementById('priceDisplay');
        const elSlope = document.getElementById('slopeDisplay');
        const elTrend = document.getElementById('trendDisplay');
        const elAlert = document.getElementById('alertBox');
        const elAlertText = document.getElementById('alertText');
        const elLevels = document.getElementById('levelsDisplay');
        const elStatus = document.getElementById('statusDisplay');

        function updateTrend() {
            if (priceHistory.length < 6) return;
            const recent = priceHistory.slice(-6);
            const avg = recent.reduce((a, b) => a + b, 0) / 6;
            const lastClose = priceHistory[priceHistory.length - 1];
            trend = lastClose > avg ? 'ALTA' : 'BAIXA';
            elTrend.innerText = trend;
            elTrend.style.color = trend === 'ALTA' ? 'var(--accent-green)' : 'var(--accent-red)';
        }

        function checkSignal(slope) {
            if (slope < -SLOPE_THRESHOLD && trend === 'BAIXA') {
                elAlert.className = 'alert-box short';
                elAlertText.innerText = 'üìâ SHORT (FORTE)';
            } else if (slope > SLOPE_THRESHOLD && trend === 'ALTA') {
                elAlert.className = 'alert-box long';
                elAlertText.innerText = 'üöÄ LONG (ALTA)';
            } else {
                elAlert.className = 'alert-box waiting';
                elAlertText.innerText = '‚è≥ Aguardando Setup';
            }
        }

        function connectWebSocket() {
            const ws = new WebSocket(WS_URL);

            ws.onopen = () => {
                elStatus.innerText = 'üü¢ Online';
                elStatus.className = 'status online';
            };

            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                const k = data.k;
                
                if (k.x) {
                    priceHistory.push(parseFloat(k.c));
                    if (priceHistory.length > 50) priceHistory.shift();
                    updateTrend();
                }

                const currentPrice = parseFloat(k.c);
                const openPrice = parseFloat(k.o);
                const slope = ((currentPrice - openPrice) / openPrice) * 100;

                elPrice.innerText = currentPrice.toFixed(2);
                elPrice.className = `price ${slope >= 0 ? 'up' : 'down'}`;
                
                elSlope.innerText = `${slope > 0 ? '+' : ''}${slope.toFixed(3)}%`;
                elSlope.style.color = slope >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';

                elLevels.innerText = `SUP: ${(currentPrice * 0.992).toFixed(2)} | RES: ${(currentPrice * 1.008).toFixed(2)}`;

                checkSignal(slope);
            };

            ws.onclose = () => {
                elStatus.innerText = 'üî¥ Reconectando...';
                elStatus.className = 'status';
                setTimeout(connectWebSocket, 5000);
            };
        }

        window.onload = () => {
            connectWebSocket();
        };
    </script>
</body>
</html>
